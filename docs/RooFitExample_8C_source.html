<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>BOSS Afterburner: RooFitExample.C Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">BOSS Afterburner
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('RooFitExample_8C_source.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">RooFitExample.C</div>  </div>
</div><!--header-->
<div class="contents">
<a href="RooFitExample_8C.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;</div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="preprocessor">#include &quot;RooAddPdf.h&quot;</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="preprocessor">#include &quot;RooArgList.h&quot;</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="preprocessor">#include &quot;RooArgusBG.h&quot;</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="preprocessor">#include &quot;RooDataSet.h&quot;</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="preprocessor">#include &quot;RooFit.h&quot;</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="preprocessor">#include &quot;RooGaussian.h&quot;</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="preprocessor">#include &quot;RooPlot.h&quot;</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="preprocessor">#include &quot;RooRealVar.h&quot;</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="preprocessor">#include &quot;RooWorkspace.h&quot;</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="keyword">using namespace </span>RooFit;</div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;</div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;</div>
<div class="line"><a name="l00018"></a><span class="lineno"><a class="line" href="RooFitExample_8C.html#a41e8769dc6e6d9c54d170544664fd6c0">   18</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="RooFitExample_8C.html#a41e8769dc6e6d9c54d170544664fd6c0">RooFitExample</a>()</div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;{</div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;    </div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;}</div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;</div>
<div class="line"><a name="l00023"></a><span class="lineno"><a class="line" href="RooFitExample_8C.html#a92cfabe7d9a858c0b8bbdc8b1436b4a4">   23</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="RooFitExample_8C.html#a92cfabe7d9a858c0b8bbdc8b1436b4a4">temp</a>()</div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;{</div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;</div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="comment">        For example a Gaussian probability density function consists typically of four objects, three objects representing the observable, the mean and the sigma parameters, and one object representing a Gaussian probability density function.</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="comment">    */</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;</div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;    <span class="comment">// * --- Observable --- * //</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;    RooRealVar mes(<span class="stringliteral">&quot;mes&quot;</span>,<span class="stringliteral">&quot;m_{ES} (GeV)&quot;</span>,5.20,5.30) ;</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;    <span class="comment">// * --- Parameters --- * //</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;    RooRealVar sigmean(<span class="stringliteral">&quot;sigmean&quot;</span>,<span class="stringliteral">&quot;B^{#pm} mass&quot;</span>,5.28,5.20,5.30) ;</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;    RooRealVar sigwidth(<span class="stringliteral">&quot;sigwidth&quot;</span>,<span class="stringliteral">&quot;B^{#pm} width&quot;</span>,0.0027,0.001,1.) ;</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;    <span class="comment">// * --- Build Gaussian PDF --- * //</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;    RooGaussian signal(<span class="stringliteral">&quot;signal&quot;</span>,<span class="stringliteral">&quot;signal PDF&quot;</span>,mes,sigmean,sigwidth) ;</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="comment">        Similarly, model building operations such as addition, multiplication, integration are represented by separate operator objects and make the modeling language scale well to models of arbitrary complexity.</span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="comment">    */</span></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="comment">        Starting with the Gaussian signal p.d.f. defined above, the example below constructs a one-dimensional probability density function with a Gaussian signal component and a &#39;ARGUS&#39; phase space background component.</span></div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="comment">    */</span></div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;    <span class="comment">// * --- Build Argus background PDF --- * //</span></div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;    RooRealVar argpar(<span class="stringliteral">&quot;argpar&quot;</span>, <span class="stringliteral">&quot;argus shape parameter&quot;</span>, -20.0, -100., -1.);</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;    RooArgusBG background(<span class="stringliteral">&quot;background&quot;</span>, <span class="stringliteral">&quot;Argus PDF&quot;</span>, mes, RooConst(5.291), argpar);</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;    <span class="comment">// * --- Construct signal+background PDF --- * //</span></div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;    RooRealVar nsig(<span class="stringliteral">&quot;nsig&quot;</span>, <span class="stringliteral">&quot;#signal events&quot;</span>, 200, 0., 10000);</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;    RooRealVar nbkg(<span class="stringliteral">&quot;nbkg&quot;</span>, <span class="stringliteral">&quot;#background events&quot;</span>, 800, 0., 10000);</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    RooAddPdf model(<span class="stringliteral">&quot;model&quot;</span>, <span class="stringliteral">&quot;g+a&quot;</span>, RooArgList(signal, background), RooArgList(nsig, nbkg));</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="comment">        We can now use this p.d.f. to generate an unbinned toy dataset, fit the p.d.f to that dataset using an unbinned maximum likelihood fit and visalizes the data with the p.d.f overlaid.</span></div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="comment">    */</span></div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    <span class="comment">// * --- Generate a toyMC sample from composite PDF --- * //</span></div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;    RooDataSet *data = model.generate(mes,2000);</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;    <span class="comment">// * --- Perform extended ML fit of composite PDF to toy data --- * //</span></div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    model.fitTo(*data);</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;    <span class="comment">// * --- Plot toy data and composite PDF overlaid --- * //</span></div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    RooPlot* mesframe = mes.frame();</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    data-&gt;plotOn(mesframe);</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    model.plotOn(mesframe);</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    model.plotOn(mesframe,Components(argus),LineStyle(kDashed));</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;<span class="comment">        In the example above, all indivual components of the RooFit p.d.f (the variables, component p.d.f.s and combined p.d.f.) are all created individually in the macro. It is also possible to organize them in a container class &#39;the workspace&#39; that has an associated factory tool to create trees of RooFit objects of arbitrary complexity from a simple construction language. A much shorter macro that uses a workspace and is equivalent to the above macro is shown below:</span></div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;<span class="comment">    */</span></div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    RooWorkspace w(<span class="stringliteral">&quot;w&quot;</span>,kTRUE);</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    w.factory(<span class="stringliteral">&quot;Gaussian::gauss(mes[5.20,5.30],mean[5.28,5.2,5.3],width[0.0027,0.001,1])&quot;</span>);</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    w.factory(<span class="stringliteral">&quot;ArgusBG::argus(mes,5.291,argpar[-20,-100,-1])&quot;</span>);</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    w.factory(<span class="stringliteral">&quot;SUM::sum(nsig[200,0,10000]*gauss,nbkg[800,0,10000]*argus)&quot;</span>);</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    <span class="comment">// * --- Generate a toyMC sample from composite PDF --- * //</span></div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    RooDataSet *data = w::sum.generate(w::mes,2000);</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    <span class="comment">// * --- Perform extended ML fit of composite PDF to toy data --- * //</span></div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    w::sum.fitTo(*data);</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    <span class="comment">// * --- Plot toy data and composite PDF overlaid --- * //</span></div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    RooPlot* mesframe = w::mes.frame();</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    data-&gt;plotOn(mesframe);</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    w::sum.plotOn(mesframe);</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    w::sum.plotOn(mesframe,Components(w::argus),LineStyle(kDashed));</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    mesframe-&gt;Draw();</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;}</div>
<div class="ttc" id="RooFitExample_8C_html_a41e8769dc6e6d9c54d170544664fd6c0"><div class="ttname"><a href="RooFitExample_8C.html#a41e8769dc6e6d9c54d170544664fd6c0">RooFitExample</a></div><div class="ttdeci">void RooFitExample()</div><div class="ttdef"><b>Definition:</b> <a href="RooFitExample_8C_source.html#l00018">RooFitExample.C:18</a></div></div>
<div class="ttc" id="RooFitExample_8C_html_a92cfabe7d9a858c0b8bbdc8b1436b4a4"><div class="ttname"><a href="RooFitExample_8C.html#a92cfabe7d9a858c0b8bbdc8b1436b4a4">temp</a></div><div class="ttdeci">void temp()</div><div class="ttdef"><b>Definition:</b> <a href="RooFitExample_8C_source.html#l00023">RooFitExample.C:23</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_f5a818e78c532f69294936c28c6ea257.html">plots</a></li><li class="navelem"><a class="el" href="dir_f53a4c51863e9953c5ab580e3275e47f.html">RooFit_examples</a></li><li class="navelem"><a class="el" href="RooFitExample_8C.html">RooFitExample.C</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.5 </li>
  </ul>
</div>
</body>
</html>
